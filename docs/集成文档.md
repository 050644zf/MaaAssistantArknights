# 集成文档

## 接口介绍

### `AsstAppendTask`

#### 接口原型

```c++
TaskId ASSTAPI AsstAppendTask(AsstHandle handle, const char* type, const char* params);
```

#### 接口说明

添加任务

#### 返回值

- `TaskId`  
    若添加成功，返回该任务 ID, 可用于后续设置任务参数；  
    若添加失败，返回 0

#### 参数说明

- `AsstHandle handle`  
    实例句柄
- `const char* type`  
    任务类型
- `const char* params`  
    任务参数，json string

##### 任务类型一览

- `StartUp`  
    开始唤醒
    不支持设置参数

- `Fight`  
    刷理智

```jsonc
// 对应的任务参数
{
    "stage": string, // 关卡名，可选，默认“当前关卡”。不支持运行中设置
    "mecidine": int, // 最大使用理智药数量，可选，默认 0
    "stone": int,    // 最大吃石头数量，可选，默认 0
    "times": int,    // 指定次数，可选，默认无穷大
}
```

- `Award`  
    领取日常奖励  
    不支持设置参数

- `Visit`  
    访问好友  
    不支持设置参数

- `Mall`  
    领取信用及商店购物

```jsonc
// 对应的任务参数
{
    "shopping": bool,       // 是否购物，可选，默认 false
    "shopping_list": [      // 购物列表，当 shopping 为 true 时必选
        string,             // 商品名，如 "加急许可"、"家具零件" 等
        ...
    ],
    "is_black_list": bool   // 购物列表是否是黑名单模式，可选，默认 false
}
```

### `AsstSetTaskParams`

#### 接口原型

```c++
bool ASSTAPI AsstSetTaskParams(AsstHandle handle, TaskId id, const char* params);
```

#### 接口说明

设置任务参数

#### 返回值

- `bool`  
    返回是否设置成功

#### 参数说明

- `AsstHandle handle`  
    实例句柄
- `TaskId task`  
    任务 ID, `AsstAppendTask` 接口的返回值
- `const char* params`  
    任务参数，json string，与 `AsstAppendTask` 接口相同。  
    未标注“不支持运行中设置”的字段都支持实时修改；否则若当前任务正在运行，会忽略对应的字段

### `AsstSetParam`

#### 接口原型

```c++
bool ASSTAPI AsstSetParam(AsstHandle handle, const char* param_id, const char* param_value);
```

#### 接口说明

设置实例级参数

#### 返回值

- `bool`  
    返回是否设置成功

#### 参数说明

- `AsstHandle handle`  
    实例句柄
- `const char* param_id`  
    参数 id
- `const char* param_value`  
    参数值，json string

| 参数作用 | 参数 id | 参数值 | 参数值示例 |
| ------- | ------- | ----- | -------- |
| 设置企鹅数据 id | `penguin_id` | { "id" : string } | `{ "id" : "1234567" }` |
| 设置 OCR 任务目标 | `ocr_text` | { TaskName: [ string, ... ] } | `{ "Roguelike1ChooseOper" : [ "帕拉斯", "银灰" ] }`<br>`{ "CreditShop-NotToBuy" : [ "碳", "家具" ] }` |
