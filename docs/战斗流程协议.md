# 战斗流程协议

`resource/battle.json` 的使用方法及各字段说明

## 完整字段一览

```jsonc
[
    {
        "stage_name": "暴君",           // 关卡名
        "stage_code": "1-7",            // 关卡号，与关卡名二选一必选
        "opers": [                      // 指定干员
            {
                "name": "棘刺",         // 干员名

                "skill": 3,             // 技能序号。可选，默认 1，取值范围 [1, 3]

                "skill_usage": 0        // 技能用法。可选，默认 0
                                        // 0 - 好了就用，有多少次用多少次（例如干员 棘刺 3 技能、桃金娘 1 技能等）
                                        // 1 - 好了就用，仅使用一次（例如干员 山 2 技能）
                                        // 2 - 指定时刻使用（依赖“波数依赖”字段）
                                        // 如果是全自动的技能，可以不填写该字段
            }
        ],
        "opers_group": [
            {
                "name": "任意正常群奶",  // 群组名，必选
                                        // 自己随便取名字，与下面 deploy 中的 name 对应起来就行

                "opers": [              // 干员任选其一，无序，会优先选练度高的，用法同上述 opers 字段
                    {
                        "name": "夜莺",
                        "skill": 3,
                        "skill_usage": 2 // 若是指定时刻，不同的干员技能 cd 可能不同，请留意
                    },
                    {
                        "name": "白面鸮",
                        "skill": 2,
                        "skill_usage": 2
                    }
                ]
            }
        ],
        "auto_deploy": [                // 自动部署干员，有费就下。有序，可选
            {
                "name": "棘刺",         // 干员名 或 群组名。必选
                "location": [ 5, 5 ],   // 放置干员的位置。必选

                "direction": 1,         // 干员朝向。必选
                                        // 0 - 无朝向（适用于召唤物）
                                        // 1 - 右； 2 - 下； 3 - 左； 4 - 上

                "preDelay": 0,          // 轮到该干员时，等待多长时间再放。可选，默认 0
                "rearDelay": 0          // 放完该干员后，等待多少时间再到下一个干员。可选，默认 0
            },
            {
                "name": "任意正常群奶",
                "location": [ 5, 6 ],
                "direction": 1,
                "preDelay": 0,
                "rearDelay": 0
            }
        ],
        "kills_deploy": [               // 依赖击杀数的操作。有序，可选
            {
                "kills": 0,             // 击杀数 >= N 的时候，进行该操作，必选
                "action": 0,            // 操作类型，必选。
                                        // 0 - 开技能；1 - 部署；2 - 撤退；
                                        // 100 - 切换二倍速开关；101 - 切换 1/5 速度（点击任意干员）

                "name": "史尔特尔",      // 干员名，action ∈ [0, 100) 时必选。
                "preDelay": 0           // 击杀数达到后，等待多长时间再进行操作。可选，默认 0
            }
        ]
    },
    {   // 其他关卡...
        "stage_name": "机密情报押运"
    }
]
```
