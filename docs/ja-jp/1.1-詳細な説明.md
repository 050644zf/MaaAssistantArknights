# MAA使用説明書

## 詳細な説明

### ステージのクリア

- 必要なステージがオプションに表示されていない場合は、**青い行動開始** のある画面に手動で入って、オプションで `現在/前回` を選んでください。
- スタート画面の `回復剤使う`、`源石使う`、`回数限定` の3つのオプションはショートスイッチですので、3つのオプションのいずれかが満たされた場合、それはタスクの完了と見なされます。
  - 例1：`回復剤使う` : `999`、`源石使う` : `10`、`回数限定` : `1` を設定すると、**一回** クリアした後、`回数限定` : `1` という条件を満たしたので、タスクの完了と見なされます。
  - 例2：`回復剤使う` と `源石使う` のチェックを外し、`回数限定` を `100` に設定すると、現在使用可能な理性がすべて使い切った後（おそらく数回だけ）、`回復剤使う` `源石使う` という条件が満たされるため、タスクの完了と見なされます。
- クリアした後 [penguin-stats](https://penguin-stats.cn/) に自動的にアップロードすることができます。
- penguin-statsのIDはカスタマイズ可能です。
- 素材ドロップを特定して表示することができる。
- 回線が落ちると、自動的に再接続されてステージのクリアが続けられます。
- 午前4時にリセットされた場合も、自動的に再接続されてステージのクリアを続けます。
- 殲滅作戦はサポートされます。
- クリアした後にレベルアップの場合はサポートされます。
- 自動指揮に失敗した場合はサポートし、その行動を自動的に諦めます。

### 基地のシフトの切り替え

#### ストラテジー

**単一施設内での最適解** を自動的に計算して選択し、全てのスキルとスキルの組み合わせをサポートし、作戦記録・純金・源石の欠片・SoCに対応してオペレーターの組み合わせを変えて使用することをサポートします！

#### 基地で働く体力のしきい値

体力値のパーセントを特定して、体力がこのしきい値未満のオペレーターは出勤せず、宿舎に直行します。

#### 特別な注意事項

- 基地のシフトは現時点では単一施設内での最適解ですが、施設全体の最適解ではありません。例えば、`シャマレ(巫恋)+テキーラ(龙舌兰)`、`ヴァーミル(红云)+シーン(稀音)` などの組み合わせは認識され、通常どおり使用できます；`ロスモンティス(迷迭香)`、`レッドパイン騎士団(红松骑士团)` などの多くの施設間で連携する組合せは一時的にサポートできません。
- 「ドローンの使用」で「貿易所-龍門幣」を選択すると、さらに「シャマレ(巫恋)の組合せ」があるかどうかを識別し、最初に使用します。
- 応接室の手がかりが1つだけ欠けている場合は、該当するスキルのあるオペレーターが選ばれ、そうでない場合は一般オペレーターが選ばれます。
- 応接室は、自分の手がかりがいっぱいになったときにのみ手がかりを譲り渡し、3つだけが譲り渡されます。必要な時は、`resource/tasks.json` の `SelectClue` - `maxTimes` フィールドを変更して、譲渡の数をカスタマイズできます。
- 制御中枢のストラテジーが複雑すぎですので、現在では「アーミヤ(巫恋)」「スワイヤー(诗怀雅)」「ケルシー(凯尔希)」「レインボー小隊(彩虹小队)」および体力値を+0.05のオペレーターのみが考慮されており、今後徐々に最適化される予定です。
- 一部の異格オペレーターは基地で競合します。スタート画面の右側のプロンプ​​ト「オペレーターの競合」があるかどうかに注意してください。その場合は、基地のシフトの変更を手動で確認してください（なにか施設に誰もいない可能性があります）。

### 公開求人認識

- 「スタート画面の公開求人」と「公開求人認識」は2つの別々の機能です！
- 公開求人は「緊急招集票」の利用がサポートされ、自動的に継続な求人をできる！設定で選択してください〜
- 星5または星6を獲得すると、ポップアップ通知が表示されます。

### 自動統合戦略（ローグライク）

- 設定の3つのオプション

  - キャンドルを集めて、多くのステージをクリアする：キャンドルを集めるために、できるだけ多くのステージをクリアする。
  - 源石錐を集めて、1階旅商人に出会って後止める：刷源石锭最高效的模式，建议手动选择 `古堡观光` （简单）模式
  - 刷源石锭投资，投资后退出：兼顾刷蜡烛和刷源石锭投资的模式

- 肉鸽已支持自动识别干员及练度，并自动选择较优干员及技能
- 支持掉线重连、支持凌晨 4 点更新后继续回去刷
- 如果软件出现 bug 卡住了，会自动放弃当次探索并重试。但如果经常在某个地方卡住然后放弃、严重影响效率的，欢迎提个 issue 反馈一下~

### 自动抄作业

欢迎加作业分享 Q 群: 912322156

#### 抄作业

- 本功能需要在有 `开始行动` 的关卡入口界面开始运行
- 若需要选择助战等，关闭 `自动编队` 功能，并手动编队后再开始即可

#### 写作业基地

- exe 同目录下有简易的制作器，可以结合 [文档](战斗流程协议.md) 使用
- 地图坐标获取：填写 `stage_name` 后直接开一局，会在目录下生成 `map.png`, 可以用于参考。后面会想办法直接在制作器上显示坐标（画饼）
- 支持演习模式，不用一直浪费理智测试的
- 若某个干员名字一直识别不对，可以打开日志 `asst.log` 看一下到底被识别成了什么，并修改 `resource/tasks.json` - `CharsNameOcrReplace` 进行正则替换
- 推荐在作业描述里填上你自己的名字（作者名）、参考的攻略视频 url, 其他想说的等等（

### 其他乱七八糟的说明

- 主界面上要执行的任务，是可以拖动改变顺序的。同样设置中基建换班的顺序，也是可以拖动改变的。
- 主界面和设置中更改的配置一般都会自动保存，含有*号的选项除外。
- 所有点击操作，都是点击按钮内随机位置，并模拟泊松分布（按钮偏中间位置点的概率大，越往旁边点到的概率越小）。
- 底层算法纯 C++ 开发，并设计了多重的缓存技术，最大限度降低 CPU 和内存占用。
- 软件支持自动更新 ✿✿ヽ(°▽°)ノ✿ 推荐非杠精的同学使用测试版，一般来说更新快且 bug 少（什么 MIUI (╯‵□′)╯︵┻━┻
- 如果新版本自动下载失败，可手动下载后，直接把压缩包放到同目录下，会自动更新的。
